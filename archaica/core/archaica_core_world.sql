/*
    ==========================================
     Archaica core updates for world database
    ==========================================
*/

-- ===========================
--    Creature formations
-- ===========================

DROP TABLE IF EXISTS `creature_formations`;
CREATE TABLE `creature_formations` (
  `leaderGUID` int(11) unsigned NOT NULL,
  `memberGUID` int(11) unsigned NOT NULL,
  `dist` float unsigned NOT NULL,
  `angle` float unsigned NOT NULL,
  `groupAI` int(11) unsigned NOT NULL,
  PRIMARY KEY (`memberGUID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

/*
    leaderGUID - GUID of group leader
    memberGUID - GUID of group member
    dist - Maximum distance between group leader and member
    angle - Angle between leader and member
    grouAI  Value   Behaviour
            0       If any creature from group is attacked, members won't assist
            1       Group member will assist only their leader if attacked.
            2       Group members will assist all group members

    (dist, angle - not needed to set, following leader for random and waypoint move not added for now)
    ==============================================================================
    Includes data for:
        -- Molten Core
        -- TODO: add more data
*/

INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`) VALUES
/* Molten Core */
(56605, 56605, 0, 0, 2),
(56605, 56606, 0, 0, 2),
(56605, 56607, 0, 0, 2),
(56609, 56609, 0, 0, 2),
(56609, 56610, 0, 0, 2),
(56609, 56616, 0, 0, 2),
(56609, 56619, 0, 0, 2),
(56609, 56620, 0, 0, 2),
(56609, 56622, 0, 0, 2),
(56609, 56626, 0, 0, 2),
(56609, 56627, 0, 0, 2),
(56609, 56628, 0, 0, 2),
(56629, 56629, 0, 0, 2),
(56629, 56630, 0, 0, 2),
(56629, 56631, 0, 0, 2),
(56629, 56632, 0, 0, 2),
(56629, 56633, 0, 0, 2),
(56634, 56634, 0, 0, 2),
(56634, 56635, 0, 0, 2),
(56634, 56636, 0, 0, 2),
(56634, 56637, 0, 0, 2),
(56634, 56638, 0, 0, 2),
(56639, 56639, 0, 0, 2),
(56639, 56640, 0, 0, 2),
(56639, 56641, 0, 0, 2),
(56639, 56642, 0, 0, 2),
(56639, 56643, 0, 0, 2),
(56644, 56644, 0, 0, 2),
(56644, 56646, 0, 0, 2),
(56644, 56647, 0, 0, 2),
(56644, 56648, 0, 0, 2),
(56644, 56649, 0, 0, 2),
(56650, 56650, 0, 0, 2),
(56650, 56651, 0, 0, 2),
(56650, 56652, 0, 0, 2),
(56650, 56653, 0, 0, 2),
(56650, 56654, 0, 0, 2),
(56677, 56677, 0, 0, 2),
(56677, 56678, 0, 0, 2),
(56677, 56679, 0, 0, 2),
(56677, 56681, 0, 0, 2),
(56677, 56682, 0, 0, 2),
(56684, 56684, 0, 0, 2),
(56684, 56685, 0, 0, 2),
(56684, 56699, 0, 0, 2),
(56700, 56700, 0, 0, 2),
(56700, 56701, 0, 0, 2),
(56702, 56702, 0, 0, 2),
(56702, 56703, 0, 0, 2),
(56704, 56704, 0, 0, 2),
(56704, 56705, 0, 0, 2),
(56706, 56706, 0, 0, 2),
(56706, 56707, 0, 0, 2),
(56708, 56708, 0, 0, 2),
(56708, 56709, 0, 0, 2),
(56710, 56710, 0, 0, 2),
(56711, 56711, 0, 0, 2),
(56712, 56712, 0, 0, 2),
(56712, 56713, 0, 0, 2),
(56714, 56714, 0, 0, 2),
(56714, 56715, 0, 0, 2),
(56716, 56716, 0, 0, 2),
(56716, 56717, 0, 0, 2),
(56718, 56718, 0, 0, 2),
(56718, 56719, 0, 0, 2),
(56722, 56722, 0, 0, 2),
(56722, 56723, 0, 0, 2),
(56722, 56724, 0, 0, 2),
(56729, 56729, 0, 0, 2),
(56729, 56730, 0, 0, 2),
(56729, 56731, 0, 0, 2),
(56729, 56732, 0, 0, 2),
(56737, 56737, 0, 0, 2),
(56737, 56738, 0, 0, 2),
(56737, 56739, 0, 0, 2),
(56747, 56747, 0, 0, 2),
(56747, 56748, 0, 0, 2),
(56750, 56750, 0, 0, 2),
(56750, 56751, 0, 0, 2),
(56750, 56775, 0, 0, 2),
(56750, 56776, 0, 0, 2),
(56781, 56781, 0, 0, 2),
(56781, 56782, 0, 0, 2),
(56781, 56783, 0, 0, 2),
(56784, 56784, 0, 0, 2),
(56784, 56790, 0, 0, 2),
(56786, 56786, 0, 0, 2),
(56786, 56796, 0, 0, 2),
(56792, 56792, 0, 0, 2),
(56792, 56793, 0, 0, 2),
(56792, 56794, 0, 0, 2),
(56792, 56795, 0, 0, 2),
(56797, 56797, 0, 0, 2),
(56797, 56798, 0, 0, 2),
(56797, 56799, 0, 0, 2),
(91257, 91257, 0, 0, 2),
(91257, 91258, 0, 0, 2),
(91257, 91259, 0, 0, 2),
(91257, 91260, 0, 0, 2),
(91261, 91261, 0, 0, 2),
(91261, 91262, 0, 0, 2),
(91261, 91263, 0, 0, 2),
(91261, 91264, 0, 0, 2),
(91265, 91265, 0, 0, 2),
(91265, 91266, 0, 0, 2),
(91265, 91267, 0, 0, 2),
(91268, 91268, 0, 0, 2),
(91268, 91269, 0, 0, 2),
(91268, 91270, 0, 0, 2),
(91268, 91271, 0, 0, 2),
(91277, 91277, 0, 0, 2),
(91277, 91278, 0, 0, 2),
(91277, 91279, 0, 0, 2),
(91286, 91286, 0, 0, 2),
(91286, 91287, 0, 0, 2),
(91286, 91288, 0, 0, 2),
(91286, 91289, 0, 0, 2),
(91290, 91290, 0, 0, 2),
(91290, 91291, 0, 0, 2),
(91290, 91292, 0, 0, 2),
-- Majordomo Executus's group
(2679655, 2679647, 0, 0, 2),
(2679655, 2679648, 0, 0, 2),
(2679655, 2679649, 0, 0, 2),
(2679655, 2679650, 0, 0, 2),
(2679655, 2679651, 0, 0, 2),
(2679655, 2679652, 0, 0, 2),
(2679655, 2679653, 0, 0, 2),
(2679655, 2679654, 0, 0, 2),
(2679655, 2679655, 0, 0, 2),
/* Blackrock Spire */
-- General Drakkisath
(40153, 40153, 0, 0, 2),
(40153, 90975, 0, 0, 2),
(40153, 90976, 0, 0, 2),
/* Zul'Gurub */
-- Thekal crew
(49310, 49310, 0, 0, 2),
(49310, 49311, 0, 0, 2),
(49310, 49312, 0, 0, 2),
(49310, 49313, 0, 0, 2),
(49310, 49314, 0, 0, 2),
-- Zulian Crocolisks
(49706, 49706, 0, 0, 2),
(49706, 49707, 0, 0, 2),
(49706, 49708, 0, 0, 2),
(49706, 49709, 0, 0, 2),
(49710, 49710, 0, 0, 2),
(49710, 49711, 0, 0, 2),
(49710, 49712, 0, 0, 2),
(49710, 49713, 0, 0, 2),
(49718, 49718, 0, 0, 2),
(49718, 49719, 0, 0, 2),
(49718, 49720, 0, 0, 2),
(49718, 49721, 0, 0, 2),
(51955, 51955, 0, 0, 2),
(51955, 51956, 0, 0, 2),
(51955, 51957, 0, 0, 2),
(51955, 51960, 0, 0, 2),
(51955, 51961, 0, 0, 2),
(91436, 91436, 0, 0, 2),
(91436, 91437, 0, 0, 2),
(91436, 91438, 0, 0, 2),
(91436, 91439, 0, 0, 2),
(91459, 91459, 0, 0, 2),
(91459, 91460, 0, 0, 2),
(91459, 91461, 0, 0, 2),
(91459, 91462, 0, 0, 2),
(91459, 91463, 0, 0, 2),
(91480, 91480, 0, 0, 2),
(91480, 91481, 0, 0, 2),
(91480, 91482, 0, 0, 2),
(91480, 91483, 0, 0, 2),
(91480, 91484, 0, 0, 2),
(91485, 91485, 0, 0, 2),
(91485, 91486, 0, 0, 2),
(91485, 91487, 0, 0, 2),
(91485, 91488, 0, 0, 2),
(91485, 91489, 0, 0, 2),
(91513, 91513, 0, 0, 2),
(91513, 91514, 0, 0, 2),
(91513, 91515, 0, 0, 2),
(91513, 91516, 0, 0, 2),
(91513, 91517, 0, 0, 2),
-- BWL: Razorgore's crew
(84388, 84388, 0, 0, 2),
(84388, 84389, 0, 0, 2),
(84388, 84390, 0, 0, 2),
(84388, 84391, 0, 0, 2),
-- Fozruk's crew
(14514, 14514, 0, 0, 2),
(14514, 14515, 0, 0, 2),
(14514, 14516, 0, 0, 2),
(14514, 14517, 0, 0, 2);


-- ===========================
--   Creature Linked Respawn
-- ===========================

DROP TABLE IF EXISTS `creature_linked_respawn`;
CREATE TABLE `creature_linked_respawn` (
  `guid` int(10) unsigned NOT NULL COMMENT 'dependent creature',
  `linkedGuid` int(10) unsigned NOT NULL COMMENT 'master creature',
  PRIMARY KEY (`guid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC COMMENT='Creature Respawn Link System';

/*
    guid - This is the guid of the creature you want to link.
    linkedGuid - This is the guid of the boss that you want to link to.
*/ 

INSERT INTO `creature_linked_respawn` (`guid`, `linkedGuid`) VALUES
/* Molten Core */
-- Lucifron
(56605, 56605),
(56606, 56606),
(56607, 56607),
-- Magmadar
(56683, 56683),
(56676, 56683),
(56675, 56683),
(56674, 56683),
(56673, 56683),
(56672, 56683),
(56671, 56683),
(56670, 56683),
(56669, 56683),
(56668, 56683),
(56667, 56683),
(56742, 56683),
(56743, 56683),
(56744, 56683),
(56745, 56683),
(56746, 56683),
-- Gehennas
(56737, 56737),
(56738, 56737),
(56739, 56737),
-- Garr
(56609, 56609),
(56666, 56609),
(56665, 56609),
(56664, 56609),
(56662, 56609),
(56661, 56609),
(56660, 56609),
(56659, 56609),
(56658, 56609),
(56657, 56609),
(56656, 56609),
(56740, 56609),
(56628, 56609),
(56627, 56609),
(56626, 56609),
(56622, 56609),
(56620, 56609),
(56619, 56609),
(56616, 56609),
(56610, 56609),
-- Shazzrah
(56608, 56608),
-- Baron Geddon
(56655, 56655),
-- Golemagg the Incerenator
(56684, 56684),
(56699, 56684),
(56685, 56684),
-- Sulfuron Harbinger
(56677, 56677),
(56678, 56677),
(56679, 56677),
(56681, 56677),
(56682, 56677),
-- Majordomo Executus
(2679647, 2679655),
(2679648, 2679655),
(2679649, 2679655),
(2679650, 2679655),
(2679651, 2679655),
(2679652, 2679655),
(2679653, 2679655),
(2679654, 2679655),
(2679655, 2679655),
-- Ragnaros
(2536452, 2536452),
-- BWL: Razorgore's crew
(84389, 84388),
(84390, 84388),
(84391, 84388);



-- =============================
--  SpellCast area requirements
-- =============================

DROP TABLE IF EXISTS `spell_require_area`;
CREATE TABLE `spell_require_area` (
  `entry` mediumint(8) unsigned NOT NULL COMMENT 'Spell Id',
  `area` mediumint(8) NOT NULL DEFAULT '0' COMMENT 'Area/Zone Id',
  PRIMARY KEY (`entry`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `spell_require_area` (`entry`, `area`) VALUES
-- Warsong Gulch
(23333, 3277),
(23335, 3277),
(23540, 3277),
(23541, 3277),
(23542, 3277),
(23567, 3277),
(23568, 3277),
(23569, 3277),
-- Arathi Basin
(24409, 3358),
(24410, 3358),
(24411, 3358),
(24412, 3358),
(24413, 3358),
(24414, 3358),
-- Alterac Valley
(23538, 2597),
(23539, 2597),
(23692, 2597),
(23696, 2597);
